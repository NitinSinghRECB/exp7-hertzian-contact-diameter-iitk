<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Virtual Lab Experiment</title>
  <link rel="stylesheet" href="./css/styles.css">
</head>

<body>

  <!-- Header -->
  <header class="header">
    <div>
      <h1>Estimation of Hertzian Contact Pressure during Nanoindentation</h1>
      <p>Material Testing laboratory</p>
    </div>
    <div class="header-actions">
      <button class="procedure-btn" onclick="openProcedure()">Procedure</button>
      <button class="reset-btn" onclick="resetExperiment()">Reset</button>
    </div>
  </header>

  <!-- Procedure Modal -->
  <div class="overlay" id="procedure">
    <div class="modal">
      <div class="modal-top">
        <h2>Experiment Procedure</h2>
        <span onclick="closeProcedure()">✕</span>
      </div>
      <ol>
        <li>Select the material for testing.</li>
        <li>Enter the indentation load and dwell time, then click <b>Submit</b>.</li>
        <li>Open the 2D view and click <b>Indent</b> to start the virtual indentation.</li>
        <li>Observe crack formation in Top View and 3D View.</li>
        <li>Use <b>Measure Crack Length</b> to view crack images and length table.</li>
        <li>Check the <b>Result</b> and <b>Conclusion</b> for final toughness values.</li>
      </ol>

    </div>
  </div>

  <!-- Main Layout -->
  <div class="workspace">

    <!-- Controls -->
    <aside class="controls">
      <h3>Control Panel</h3>

      <!-- MATERIAL SELECTION -->
      <!-- MATERIAL SELECTION -->
<button class="primary" id="materialsBtn" onclick="showMaterialOptions()">
  Materials
</button>

<div id="materialOptions" class="material-box" style="display:none;">
  <p class="mat-text">1. Mild Steel</p>
  <p class="mat-text">2. Alumina</p>
</div>

<button class="primary" id="performIndentBtn" onclick="showIndentPanel()" style="display:none;">
  Perform Nanoindentation
</button>



      <div id="indentPanel" class="indent-panel">

        <div class="input-row">
          <label>Force</label>
          <div class="input-unit">
            <input type="number" id="forceInput" step="0.1" min="0.1" max="10">
            <span>mN</span>
          </div>
          <div class="range">Range: 0.5mN - 2mN</div>
        </div>

        <div class="input-row">
          <label>Holding Time</label>
          <div class="input-unit">
            <input type="number" id="timeInput" step="1" min="0">
            <span>s</span>
          </div>

          <div class="range">Range: 0sec - 10sec</div>
        </div>
        <button id="submitIndent" class="primary" disabled onclick="submitIndent()">
          Submit
        </button>

      </div>

      <button class="primary" id="dis2d" onclick="display2d()">Two-Dimentional View</button>

      <button class="primary" id="indent" onclick="movedown()">Indent</button>

      <button class="primary" id="measureCrackBtn" onclick="openCrackMeasure()" style="display:none;">
        Measure Crack Length
      </button>

      <button class="primary" id="formula" onclick="showformula()">Formulae Used</button>

      <button class="primary" id="resultBtn" onclick="showResult()">
        Result
      </button>

      <button class="primary" id="conclusionBtn" onclick="showConclusion()">
        Conclusion
      </button>

    </aside>

    <!-- Simulation Area -->
    <section class="simulation">

      <div class="sim-upper">
        <h3>Simulation Area</h3>
        <div class="placeholder">
          <!-- <div id="infoBox">Move the mouse pointer on the images to see the details</div> -->
          <!-- <h1 id="heading">Machine Over View</h1> -->

          <!-- SVG REMOVED FROM HERE -->
          <div class="svg-container">

            

            <div class="innersvg">
              <svg width="980" height="720" viewBox="0 0 980 720" xmlns="http://www.w3.org/2000/svg">

                <defs>
                  <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto">
                    <path d="M0,0 L6,3 L0,6 Z" fill="#e0e0e0" />
                  </marker>

                  <linearGradient id="powderSteel" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="#3a3a3a" />
                    <stop offset="100%" stop-color="#141414" />
                  </linearGradient>

                  <linearGradient id="anodizedAl" x1="0" y1="0" x2="1" y2="0">
                    <stop offset="0%" stop-color="#8f8f8f" />
                    <stop offset="30%" stop-color="#cfcfcf" />
                    <stop offset="50%" stop-color="#b5b5b5" />
                    <stop offset="70%" stop-color="#d8d8d8" />
                    <stop offset="100%" stop-color="#8a8a8a" />
                  </linearGradient>

                  <linearGradient id="stainless" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="#f2f2f2" />
                    <stop offset="50%" stop-color="#bdbdbd" />
                    <stop offset="100%" stop-color="#eeeeee" />
                  </linearGradient>

                  <linearGradient id="opticalGlass" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0%" stop-color="#ffffff" stop-opacity="0.25" />
                    <stop offset="50%" stop-color="#90caf9" stop-opacity="0.10" />
                    <stop offset="100%" stop-color="#000000" stop-opacity="0.05" />
                  </linearGradient>

                  <linearGradient id="diamondTip" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="#f5f5f5" />
                    <stop offset="50%" stop-color="#cfd8dc" />
                    <stop offset="100%" stop-color="#ffffff" />
                  </linearGradient>

                  <linearGradient id="stageAl" x1="0" y1="0" x2="1" y2="0">
                    <stop offset="0%" stop-color="#9e9e9e" />
                    <stop offset="50%" stop-color="#d6d6d6" />
                    <stop offset="100%" stop-color="#9e9e9e" />
                  </linearGradient>

                  <linearGradient id="sampleMat" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="#c49a6c" />
                    <stop offset="100%" stop-color="#8d6e63" />
                  </linearGradient>
                </defs>

                <rect x="160" y="130" width="660" height="460" fill="url(#powderSteel)" stroke="#1c1c1c"
                  stroke-width="4" />

                <rect x="170" y="170" width="170" height="380" fill="url(#opticalGlass)" stroke="#3a3a3a" />
                <rect x="650" y="170" width="170" height="380" fill="url(#opticalGlass)" stroke="#3a3a3a" />

                <rect x="360" y="180" width="260" height="380" fill="#121212" />

                <rect x="380" y="180" width="220" height="22" fill="url(#anodizedAl)" stroke="#6d6d6d" />

                <rect x="425" y="202" width="70" height="48" fill="url(#anodizedAl)" stroke="#7a7a7a" />

                <rect x="447" y="250" width="16" height="170" fill="url(#stainless)" />

                <rect x="437" y="420" width="36" height="14" fill="url(#anodizedAl)" />

                <svg width="600" height="600" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">

                  <defs>
                    <linearGradient id="diamondTip" x1="0%" y1="0%" x2="0%" y2="100%">
                      <stop offset="0%" stop-color="#00f" />
                      <stop offset="100%" stop-color="#0ff" />
                    </linearGradient>
                  </defs>

                  <polygon points="455,434 447,470 463,470" fill="url(#diamondTip)" transform="rotate(180 455 452)" />
                </svg>


                <rect x="560" y="202" width="16" height="55" fill="url(#anodizedAl)" />

                <rect x="545" y="257" width="110" height="70" fill="url(#anodizedAl)" stroke="#5f5f5f" />

                <rect x="585" y="327" width="32" height="75" fill="url(#stainless)" />

                <circle cx="601" cy="410" r="20" fill="url(#anodizedAl)" stroke="#5f5f5f" />

                <rect x="593" y="430" width="16" height="48" fill="#6d6d6d" />

                <circle cx="601" cy="486" r="8" fill="#1c1c1c" />
                <circle cx="601" cy="486" r="4" fill="#4fc3f7" opacity="0.5" />

                <rect x="395" y="500" width="190" height="26" fill="url(#stageAl)" />

                <rect x="430" y="526" width="120" height="18" fill="#8c8c8c" />

                <rect x="450" y="488" width="80" height="10" fill="url(#sampleMat)" />

                <line x1="820" y1="160" x2="780" y2="200" stroke="#ffffff" marker-end="url(#arrow)" />
                <text x="830" y="155" fill="#ffffff" font-size="13">Protective Enclosure</text>

                <line x1="460" y1="180" x2="460" y2="202" stroke="#ffffff" marker-end="url(#arrow)" />
                <text x="460" y="165" text-anchor="middle" fill="#ffffff" font-size="13">Indenter Head</text>

                <line x1="520" y1="470" x2="463" y2="460" stroke="#ffffff" marker-end="url(#arrow)" />
                <text x="525" y="475" fill="#ffffff" font-size="13">Berkovich Indenter</text>

                <line x1="720" y1="300" x2="655" y2="290" stroke="#ffffff" marker-end="url(#arrow)" />
                <text x="725" y="300" fill="#ffffff" font-size="13">Optical Microscope</text>

                <line x1="520" y1="560" x2="520" y2="526" stroke="#ffffff" marker-end="url(#arrow)" />
                <text x="520" y="585" text-anchor="middle" fill="#ffffff" font-size="13">Sample Stage</text>

                <line x1="360" y1="488" x2="450" y2="492" stroke="#ffffff" marker-end="url(#arrow)" />
                <text x="300" y="488" fill="#ffffff" font-size="13">Sample</text>

              </svg>
              <!-- SVG REMOVED COMPLETELY -->
               



            </div>
            <!-- Hidden Legend (Plastic & Elastic Zone) -->
<div id="legendBox" style="
    position:absolute;
    bottom:20px;
    right:20px;
    display:none;
    background:rgba(0,0,0,0.55);
    padding:12px 18px;
    border-radius:10px;
    color:white;
    font-size:16px;
    border:1px solid white;
">

    <div style="display:flex; align-items:center; margin-bottom:6px;">
        <div style="width:20px; height:20px; background:#d32f2f; border:1px solid white; margin-right:10px;"></div>
        Plastic Zone
    </div>

    <div style="display:flex; align-items:center;">
        <div style="width:20px; height:20px; background:#00c853; border:1px solid white; margin-right:10px;"></div>
        Elastic Zone
    </div>

</div>

            <div id="pngHolder"></div>
            <div class="graph" id="graphBox" style="display:none;">
    <canvas id="miniGraph" width="260" height="230"></canvas>
</div>

          </div>

        </div>
      </div>

      <div class="sim-lower">
        <h3>Observations</h3>

        <div class="parameter-block">
          <h3 class="param-title">Test Parameters</h3>

          <div class="param-row-horizontal">

            <div class="param-cell">
              <span class="param-label">Strain Rate</span>
              <span class="param-value">0.05 s⁻¹</span>
            </div>

            <div class="param-cell">
              <span class="param-label">Load Rate</span>
              <span class="param-value">0.2 mN/s</span>
            </div>

            <div class="param-cell">
              <span class="param-label">Displacement Rate</span>
              <span class="param-value">10 nm/s</span>
            </div>

            <div class="param-cell">
              <span class="param-label">Thermal Drift</span>
              <span class="param-value">≤ 0.05 nm/s</span>
            </div>

          </div>
        </div>

      </div>

    </section>

  </div>

  <!-- Formula Popup -->
  <div id="formulaModal" class="formula-modal">
    <div class="formula-box">

        <span class="close-btn" onclick="closeFormula()">✖</span>

        <h3>Hertzian Contact Formulae</h3>

        <div class="formula-content">

            <!-- Maximum Hertzian Pressure -->
            <p><b>Maximum Hertzian Pressure</b></p>
            <div class="formula-equation-box">
                p₀ = <span class="frac">
                        <span class="top">3P</span>
                        <span class="bottom">2πa²</span>
                    </span>
                = 1.5 pₘ
            </div>

            <br>

            <!-- Pressure Distribution -->
            <p><b>Pressure Distribution</b></p>
            <div class="formula-equation-box">
                p(r) = p₀ &nbsp; ( 1 - <span class="frac">
                                        <span class="top">r²</span>
                                        <span class="bottom">a²</span>
                                    </span> )<sup>1/2</sup>
            </div>

            <br>

            <!-- Contact Radius -->
            <p><b>Contact Radius</b></p>
            <div class="formula-equation-box">
                a = ( <span class="frac">
                        <span class="top">3PR</span>
                        <span class="bottom">4E*</span>
                    </span> )<sup>1/3</sup>
            </div>

            <p style="margin-top:10px;">
                where, P = applied load and R = indenter tip radius
            </p>

            <br>

            <!-- Reduced Modulus -->
            <div class="formula-equation-box">
                <span class="frac">
                    <span class="top">1</span>
                    <span class="bottom">E*</span>
                </span>
                = 
                <span class="frac">
                    <span class="top">1 − νₛ²</span>
                    <span class="bottom">Eₛ</span>
                </span>
                +
                <span class="frac">
                    <span class="top">1 − νᵢ²</span>
                    <span class="bottom">Eᵢ</span>
                </span>
            </div>

            <br>

            <!-- Definitions -->
            <p><b>where,</b></p>

            <ul class="formula-list">
                <li><b>Eₛ, νₛ</b> — Young’s modulus and Poisson’s ratio of specimen</li>
                <li><b>Eᵢ, νᵢ</b> — Young’s modulus and Poisson’s ratio of indenter</li>
                <li><b>E*</b> — reduced (effective) modulus</li>
            </ul>

        </div>
    </div>
</div>


  
<!-- CONCLUSION POPUP -->
<div id="conclusionModal" class="formula-modal conclusion-modal">
  <div class="formula-box conclusion-box">

    <span class="close-btn" onclick="closeConclusion()">✖</span>
    <h3>Conclusions</h3>

    <div class="conclusion-content">

      <ul class="conclusion-list">
        <li>
          Alumina, due to its higher stiffness, deforms less under load, producing a smaller contact
          area and consequently higher Hertzian contact pressure.
        </li>

        <li>
          The elevated pressure generates larger subsurface stresses that promote crack initiation
          and brittle fracture rather than plastic flow.
        </li>

        <li>
          Mild steel, being more compliant, spreads the load over a larger area, reducing contact
          pressure and encouraging plastic deformation.
        </li>

        <li>
          Thus, Hertzian pressure helps predict wear mode: ductile (plastic flow) in mild steel and
          brittle (cracking/chipping) in alumina.
        </li>
      </ul>

    </div>

  </div>
</div>




<!-- RESULT POPUP -->
<div id="resultModal" class="formula-modal result-modal">
  <div class="formula-box result-box">

    <span class="close-btn" onclick="closeResult()">✖</span>
    <h3>Material Comparison Results</h3>

    <div class="result-content">

      <table class="result-table">
        <tr>
          <th>Property</th>
          <th>Mild Steel</th>
          <th>Alumina</th>
          <th>Remarks</th>
        </tr>

        <tr>
          <td>Specimen modulus Eₛ (GPa)</td>
          <td>210</td>
          <td>380</td>
          <td>Alumina is stiffer than MS</td>
        </tr>

        <tr>
          <td>Poisson’s ratio νₛ</td>
          <td>0.30</td>
          <td>0.22</td>
          <td>—</td>
        </tr>

        <tr>
          <td>Max depth hₘₐₓ (nm)</td>
          <td>42</td>
          <td>32</td>
          <td>—</td>
        </tr>

        <tr>
          <td>Stiffness S = dP/dh (kN/m)</td>
          <td>177</td>
          <td>237</td>
          <td>Alumina is stiffer than MS</td>
        </tr>

        <tr>
          <td>Reduced modulus E* (GPa)</td>
          <td>192</td>
          <td>296</td>
          <td>Alumina is stiffer than MS</td>
        </tr>

        <tr>
          <td>Load P (mN)</td>
          <td>5</td>
          <td>5</td>
          <td>constant</td>
        </tr>

        <tr>
          <td>Tip radius R (µm)</td>
          <td>5</td>
          <td>5</td>
          <td>constant</td>
        </tr>

        <tr>
          <td>Contact radius a (µm)</td>
          <td>0.46</td>
          <td>0.40</td>
          <td>Decreases with stiffness</td>
        </tr>

        <tr>
          <td>Contact area A = πa² (m²)</td>
          <td>6.66 × 10⁻¹³</td>
          <td>4.96 × 10⁻¹³</td>
          <td>Decreases with stiffness</td>
        </tr>

        <tr>
          <td>Mean pressure pₘ (GPa)</td>
          <td>7.5</td>
          <td>10.1</td>
          <td>Increases with stiffness</td>
        </tr>

        <tr>
          <td>Max pressure p₀ (GPa)</td>
          <td>11.3</td>
          <td>15.2</td>
          <td>Increases with stiffness</td>
        </tr>

        <tr>
          <td>Max shear stress τₘₐₓ (GPa)</td>
          <td>3.5</td>
          <td>4.7</td>
          <td>Increases with stiffness</td>
        </tr>

      </table>

    </div>
  </div>
</div>




<!-- STARTUP POPUP -->
<div id="startupOverlay" class="formula-modal" style="backdrop-filter: blur(6px); display:flex;">
  <div class="formula-box" style="width:400px; text-align:center;">

    <h3>Do you Know estimation of H & E using p-h curve obtained during Nanoindentation </h3>

    <div style="margin-top:20px; text-align:left; font-size:18px;">
      <label><input type="radio" name="like" value="yes"> Yes</label><br><br>
      <label><input type="radio" name="like" value="no"> No</label>
    </div>

    <button onclick="submitLike()" 
            style="margin-top:20px; padding:10px 20px; font-size:16px; cursor:pointer;">
      Save
    </button>

  </div>
</div>






  <script src="./js/main.js"></script>

</body>
</html>
